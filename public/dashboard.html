<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard — MeetingMind</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/feedback.css">
</head>
<body>
  <div class="navbar">
    <span class="logo">MeetingMind</span>
    <nav>
      <span class="user-email" id="user-email"></span>
      <span class="plan-badge" id="plan-badge" style="display:none"></span>
      <a href="/admin/feedback" class="btn btn-secondary btn-small" id="admin-link" style="display:none">Admin</a>
      <a href="/account.html" class="btn btn-secondary btn-small">Account</a>
      <button class="btn btn-secondary btn-small" id="logout-btn">Log out</button>
    </nav>
  </div>

  <div class="container dashboard">
    <!-- Upload Audio Section -->
    <h2>Upload Audio</h2>
    <div class="upload-section notepad-sheet">
      <div class="notepad-header">Audio Transcription</div>
      <p class="helper-text">Upload a recording (mp3, wav, m4a, or webm — up to 100 MB) and we'll transcribe it automatically. MeetingMind extracts decisions, owners, and deadlines — not just a transcript.</p>
      <input type="text" id="upload-title" placeholder="Meeting title (optional)" class="upload-title-input">
      <div class="upload-row">
        <input type="file" id="audio-file" accept=".mp3,.wav,.m4a,.webm">
        <button class="btn btn-primary" id="upload-btn">Upload & Transcribe</button>
      </div>
      <div class="upload-status" id="upload-status"></div>
    </div>

    <!-- Zoom Import Section -->
    <div class="upload-section" id="zoom-section" style="display:none">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <h3 style="margin:0">Zoom Meetings</h3>
        <span id="zoom-status-badge"></span>
      </div>
      <div id="zoom-not-connected">
        <p class="helper-text">Connect your Zoom account to import meeting recordings directly.</p>
        <a class="btn btn-primary btn-small" id="zoom-connect-btn" href="/api/zoom/connect">Connect Zoom</a>
      </div>
      <div id="zoom-connected" style="display:none">
        <div style="display:flex;gap:8px;margin-bottom:12px">
          <button class="btn btn-secondary btn-small" id="zoom-refresh-btn">Refresh Meetings</button>
          <button class="btn btn-danger btn-small" id="zoom-disconnect-btn">Disconnect</button>
        </div>
        <div id="zoom-meetings-list"></div>
      </div>
    </div>

    <!-- Paste Notes Section -->
    <h2>Extract Action Items</h2>
    <div class="notes-input notepad-sheet">
      <div class="notepad-header">Meeting Notes</div>
      <p class="helper-text">Paste your transcript or meeting notes below, then click <strong>Extract</strong> to generate action items and a follow-up email.</p>
      <textarea id="notes-input" placeholder="Paste your meeting notes here...&#10;&#10;Example:&#10;Team standup — Feb 8, 2026&#10;Attendees: Sarah, John, Mike&#10;&#10;Sarah will finalize the landing page design by Wednesday.&#10;John needs to fix the login bug before end of day Friday.&#10;Mike will schedule a follow-up with the client next week."></textarea>
      <div class="input-actions">
        <button class="btn btn-primary" id="extract-btn">Extract Action Items</button>
        <span class="divider-text">or</span>
        <button class="btn btn-secondary" id="record-btn">Record Meeting</button>
      </div>
    </div>

    <!-- Recording UI -->
    <div class="recording-panel" id="recording-panel" style="display:none">
      <div class="recording-indicator">
        <span class="rec-dot"></span>
        <span id="rec-timer">0:00</span>
      </div>
      <button class="btn btn-danger" id="stop-btn">Stop Recording</button>
    </div>

    <!-- Results Section -->
    <div class="results" id="results">
      <h3>Action Items</h3>
      <table class="action-items-table">
        <thead>
          <tr><th>Task</th><th>Owner</th><th>Deadline</th></tr>
        </thead>
        <tbody id="action-items-body"></tbody>
      </table>

      <h3>Follow-up Email</h3>
      <div class="email-box">
        <button class="btn btn-secondary btn-small copy-btn" id="copy-email-btn">Copy</button>
        <div id="email-content"></div>
      </div>
      <div class="export-actions" id="extract-email-actions" style="display:none">
        <a class="btn btn-secondary btn-small" id="extract-gmail-btn" href="#" target="_blank">Email (Gmail)</a>
        <a class="btn btn-secondary btn-small" id="extract-outlook-btn" href="#" target="_blank">Email (Outlook)</a>
      </div>

      <div class="results-actions">
        <button class="btn btn-primary" id="save-btn">Save Meeting</button>
        <button class="btn btn-secondary" id="discard-btn">Discard</button>
      </div>
    </div>

    <!-- Meeting Detail View -->
    <div class="meeting-detail" id="meeting-detail" style="display:none">
      <button class="btn btn-secondary btn-small" id="back-to-list">&larr; Back to list</button>
      <h2 id="detail-title"></h2>
      <span class="detail-date" id="detail-date"></span>
      <div class="transcript-header">
        <h3 class="transcript-label">Transcript</h3>
        <button class="btn btn-secondary btn-small" id="edit-transcript-btn">Edit</button>
      </div>
      <div class="detail-transcript" id="detail-transcript"></div>
      <textarea class="detail-transcript-edit" id="detail-transcript-edit" style="display:none"></textarea>
      <div class="edit-actions" id="edit-transcript-actions" style="display:none">
        <button class="btn btn-primary btn-small" id="save-transcript-btn">Save</button>
        <button class="btn btn-secondary btn-small" id="cancel-transcript-btn">Cancel</button>
        <span class="edit-status" id="transcript-edit-status"></span>
      </div>
      <div class="export-actions">
        <button class="btn btn-secondary btn-small" id="copy-transcript-btn">Copy transcript</button>
        <button class="btn btn-primary btn-small" id="use-for-extract-btn">Use for extraction</button>
        <a class="btn btn-secondary btn-small" id="email-gmail-btn" href="#" target="_blank">Email (Gmail)</a>
        <a class="btn btn-secondary btn-small" id="email-outlook-btn" href="#" target="_blank">Email (Outlook)</a>
      </div>

      <div id="detail-extraction" style="display:none">
        <h3 style="margin-top:24px">Action Items</h3>
        <div id="detail-extraction-content"></div>
      </div>
      <p class="privacy-note">Your transcripts are private and only visible to you.</p>
    </div>

    <!-- Past Meetings -->
    <div class="past-meetings" id="past-meetings-section">
      <h2>Past Meetings</h2>
      <div id="meetings-list"></div>
    </div>
  </div>

  <footer class="site-footer">
    <div>&copy; 2026 MeetingMind. All rights reserved.</div>
    <div class="footer-links">
      <a href="/pricing.html">Pricing</a>
      <a href="/blog">Blog</a>
    </div>
    <div style="margin-top:10px;font-size:0.8rem;color:#aaa">Coming soon: integrations with Slack, Jira, and other tools.</div>
  </footer>

  <script src="/js/dashboard.js"></script>
  <script src="/js/feedback.js"></script>
</body>
</html>
